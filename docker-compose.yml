version: "3"

x-tests: &tests
  image: keboola/cors
  volumes:
    - ./build/logs/:/code/build/logs/
  command: ['composer', 'ci']


services:
  tests80: &tests80
    <<: *tests
    build:
      context: .
      args:
        PHP_VERSION: 8.0

  tests81: &tests81
    <<: *tests
    build:
      context: .
      args:
        PHP_VERSION: 8.1

  tests82: &tests82
    <<: *tests
    build:
      context: .
      args:
        PHP_VERSION: 8.2

  tests-local:
    <<: *tests80
    volumes:
      - .:/code
